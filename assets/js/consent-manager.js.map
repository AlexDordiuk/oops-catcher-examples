{
  "version": 3,
  "sources": ["../../src/consent-manager.ts"],
  "sourcesContent": [
    "/**\n * Consent Manager - Privacy-first consent management\n * Simulates the consent system from Oops Catcher SDK\n */\n\nexport interface ConsentPreferences {\n  // Required fields - always collected\n  userAgent: boolean\n  platform: boolean\n  screenResolution: boolean\n  viewport: boolean\n  online: boolean\n  cookiesEnabled: boolean\n  pixelRatio: boolean\n\n  // Optional fields - user can opt in/out\n  language?: boolean\n  timezone?: boolean\n  memory?: boolean\n  cores?: boolean\n  touchSupport?: boolean\n  colorDepth?: boolean\n}\n\nexport interface ConsentState {\n  granted: boolean\n  timestamp: string\n  preferences: ConsentPreferences\n}\n\nexport class ConsentManager {\n  private storageKey = 'oops-catcher-consent'\n  private consentState: ConsentState | null = null\n\n  constructor() {\n    this.loadConsent()\n  }\n\n  private loadConsent(): void {\n    try {\n      const stored = localStorage.getItem(this.storageKey)\n      this.consentState = stored ? JSON.parse(stored) : null\n    } catch (e) {\n      console.warn('Failed to load consent:', e)\n      this.consentState = null\n    }\n  }\n\n  private saveConsent(): void {\n    if (!this.consentState) return\n\n    try {\n      localStorage.setItem(this.storageKey, JSON.stringify(this.consentState))\n    } catch (e) {\n      console.warn('Failed to save consent:', e)\n    }\n  }\n\n  grantConsent(preferences: Partial<Omit<ConsentPreferences, 'userAgent' | 'platform' | 'screenResolution' | 'viewport' | 'online' | 'cookiesEnabled' | 'pixelRatio'>> = {}): void {\n    this.consentState = {\n      granted: true,\n      timestamp: new Date().toISOString(),\n      preferences: {\n        // Required fields - always true\n        userAgent: true,\n        platform: true,\n        screenResolution: true,\n        viewport: true,\n        online: true,\n        cookiesEnabled: true,\n        pixelRatio: true,\n        // Optional fields - default to true unless explicitly set\n        language: preferences.language ?? true,\n        timezone: preferences.timezone ?? true,\n        memory: preferences.memory ?? true,\n        cores: preferences.cores ?? true,\n        touchSupport: preferences.touchSupport ?? true,\n        colorDepth: preferences.colorDepth ?? true\n      }\n    }\n\n    this.saveConsent()\n  }\n\n  revokeConsent(): void {\n    this.consentState = null\n    try {\n      localStorage.removeItem(this.storageKey)\n    } catch (e) {\n      console.warn('Failed to remove consent:', e)\n    }\n  }\n\n  hasConsent(): boolean {\n    return this.consentState?.granted ?? false\n  }\n\n  getConsentState(): ConsentState | null {\n    return this.consentState\n  }\n\n  isFieldAllowed(field: keyof ConsentPreferences): boolean {\n    if (!this.hasConsent()) return false\n\n    const preferences = this.consentState?.preferences\n    if (!preferences) return false\n\n    // Required fields are always allowed\n    const requiredFields: (keyof ConsentPreferences)[] = [\n      'userAgent', 'platform', 'screenResolution',\n      'viewport', 'online', 'cookiesEnabled', 'pixelRatio'\n    ]\n\n    if (requiredFields.includes(field)) return true\n\n    // Optional fields - check preference\n    return preferences[field] ?? false\n  }\n}\n"
  ],
  "mappings": "AA8BO,MAAM,CAAe,CAClB,WAAa,uBACb,aAAoC,KAE5C,WAAW,EAAG,CACZ,KAAK,YAAY,EAGX,WAAW,EAAS,CAC1B,GAAI,CACF,IAAM,EAAS,aAAa,QAAQ,KAAK,UAAU,EACnD,KAAK,aAAe,EAAS,KAAK,MAAM,CAAM,EAAI,WAC3C,EAAP,CACA,QAAQ,KAAK,0BAA2B,CAAC,EACzC,KAAK,aAAe,MAIhB,WAAW,EAAS,CAC1B,IAAK,KAAK,aAAc,OAExB,GAAI,CACF,aAAa,QAAQ,KAAK,WAAY,KAAK,UAAU,KAAK,YAAY,CAAC,QAChE,EAAP,CACA,QAAQ,KAAK,0BAA2B,CAAC,GAI7C,YAAY,CAAC,EAA0J,CAAC,EAAS,CAC/K,KAAK,aAAe,CAClB,QAAS,GACT,UAAW,IAAI,KAAK,EAAE,YAAY,EAClC,YAAa,CAEX,UAAW,GACX,SAAU,GACV,iBAAkB,GAClB,SAAU,GACV,OAAQ,GACR,eAAgB,GAChB,WAAY,GAEZ,SAAU,EAAY,UAAY,GAClC,SAAU,EAAY,UAAY,GAClC,OAAQ,EAAY,QAAU,GAC9B,MAAO,EAAY,OAAS,GAC5B,aAAc,EAAY,cAAgB,GAC1C,WAAY,EAAY,YAAc,EACxC,CACF,EAEA,KAAK,YAAY,EAGnB,aAAa,EAAS,CACpB,KAAK,aAAe,KACpB,GAAI,CACF,aAAa,WAAW,KAAK,UAAU,QAChC,EAAP,CACA,QAAQ,KAAK,4BAA6B,CAAC,GAI/C,UAAU,EAAY,CACpB,OAAO,KAAK,cAAc,SAAW,GAGvC,eAAe,EAAwB,CACrC,OAAO,KAAK,aAGd,cAAc,CAAC,EAA0C,CACvD,IAAK,KAAK,WAAW,EAAG,MAAO,GAE/B,IAAM,EAAc,KAAK,cAAc,YACvC,IAAK,EAAa,MAAO,GAQzB,GALqD,CACnD,YAAa,WAAY,mBACzB,WAAY,SAAU,iBAAkB,YAC1C,EAEmB,SAAS,CAAK,EAAG,MAAO,GAG3C,OAAO,EAAY,IAAU,GAEjC",
  "debugId": "4CA4AD42D8111E4E64756E2164756E21",
  "names": []
}